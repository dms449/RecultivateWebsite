<div class="container">
  

  <!-- add new property -->
  <a class="btn btn-primary" data-bs-toggle="collapse" href="#createPerson" role="button" aria-expanded="false" aria-controls="createPerson">
    Create
  </a>
  <div class="collapse" id="createPerson">

    <form action="$(Genie.Router.linkto(:create_person))" method="POST" class="row g-3 align-items-center">
      <% partial(joinpath(Genie.config.path_resources, "persons", "views", "person_form.jl.html"), person=nothing, context=@__MODULE__) %>
      <div class="row justify-content-center m-2">
        <button type="submit" class="w-35 btn btn-primary">Add</button>
      </div>
    </form>
  </div>


  <!-- show properties -->
  <h3> Persons</h3>
  <hr class="my-4">
  <table class="table">
    <thead>
      <tr>
        <th scope="col">first</th>
        <th scope="col">last</th>
        <th scope="col">mi</th>
        <th scope="col">email</th>
        <th scope="col">phone</th>
        <th scope="col">contact method</th>
        <th scope="col"></th>
      </tr>
    </thead>
    <tbody>
    <% for_each(persons) do p %>
      <tr>
        <th scope="row">$(p.first)</th>
        <td>$(p.last)</td>
        <td>$(p.mi)</td>
        <td>$(p.email)</td>
        <td>$(p.phone)</td>
        <td>$(p.contact_preference)</td>
        <td><a class="btn btn-primary" href="/persons/$(p.id)/edit" role="button">Edit</a></td>
      </tr>
    <% end %>
    </tbody>
  </table>


  <% if num_pages > 1 %>
  <nav class="row justify-content-center" aria-label="...">
    <div class="col-1">
      <ul class="pagination mb-3">

        <% if pgn == 1%>
        <li class="page-item disabled">
          <a class="page-link" href="/persons?pgn=$(pgn-1)" tabindex="-1" aria-disabled="true">Previous</a>
        </li>
        <% else %>
        <li class="page-item">
          <a class="page-link" href="/persons?pgn=$(pgn-1)" tabindex="-1">Previous</a>
        </li>
        <% end %>


        <!-- <li class="page-item active" aria-current="page"><a class="page-link" href="/persons?pgn=1">1</a></li> -->
        <% for_each(1:num_pages) do i %>
        <!-- <% if pgn == i%> -->
        <!-- <li class="page-item active" aria-current="page"><a class="page-link" href="/persons?pgn=$i">$i</a></li> -->
        <!-- < % else %> -->
        <li class="page-item"><a class="page-link" href="/persons?pgn=$i">$i</a></li>
        <!-- <% end %> -->
        <% end %>

        

        <% if pgn == num_pages%>
        <li class="page-item disabled">
          <a class="page-link" href="/persons?pgn=$(pgn+1)" aria-disabled="true">Next</a>
        </li>
        <% else %>
        <li class="page-item">
          <a class="page-link" href="/persons?pgn=$(pgn+1)">Next</a>
        </li>
        <% end %>
      </ul>
    </div>
  </nav>
  <% end %>

</div>

